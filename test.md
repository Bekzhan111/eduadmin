# Тестирование образовательной платформы

## Общая информация
Данный документ содержит полный список функциональности для тестирования на продакшн среде.
Тестирование должно проводиться последовательно по ролям пользователей.

---

## 1. АУТЕНТИФИКАЦИЯ И РЕГИСТРАЦИЯ

### 1.1 Страница входа (/login)
- [ ] Открытие страницы входа
- [ ] Ввод корректных данных (email + пароль)
- [ ] Ввод некорректных данных
- [ ] Переход на вкладку "Регистрация"
- [ ] Отображение ошибок валидации

### 1.2 Регистрация пользователей (/register)
- [ ] **Регистрация с ключом школы** - создание администратора школы
- [ ] **Регистрация с ключом учителя** - привязка к школе
- [ ] **Регистрация с ключом ученика** - привязка к школе  
- [ ] **Регистрация с ключом автора** - независимая регистрация
- [ ] **Регистрация с ключом модератора** - независимая регистрация
- [ ] Валидация полей: Полное имя, Email, Пароль, Ключ регистрации
- [ ] Обработка ошибок (неверный ключ, истекший ключ, уже использованный ключ)
- [ ] Подтверждение email после регистрации

### 1.3 Callback аутентификации (/auth/callback)
- [ ] Обработка подтверждения email
- [ ] Перенаправление на дашборд после успешной аутентификации
- [ ] Обработка ошибок аутентификации

---

## 2. СУПЕРАДМИНИСТРАТОР (role: super_admin)

### 2.1 Дашборд суперадмина (/dashboard)
- [ ] Отображение статистики регистраций по ролям
- [ ] Карточки с общими метриками системы
- [ ] Быстрые действия (создание школы, управление пользователями)
- [ ] Лента последних активностей
- [ ] Индикаторы состояния системы

### 2.2 Управление пользователями (/dashboard/users)
- [ ] Просмотр всех пользователей системы
- [ ] Фильтрация по ролям (school, teacher, student, author, moderator)
- [ ] Поиск по имени, email, школе
- [ ] Статистические карточки по ролям
- [ ] Удаление пользователей с подтверждением

### 2.3 Управление школами (/dashboard/schools)
- [ ] Просмотр списка всех школ
- [ ] **Создание новой школы** с полями:
  - Название школы
  - Город
  - Адрес
  - БИН
  - Ключ регистрации (генерация или ручной ввод)
  - Максимальное количество учителей
  - Максимальное количество учеников
- [ ] Генерация ключа регистрации школы
- [ ] Копирование ключа в буфер обмена

### 2.4 Детали школы (/dashboard/schools/[id])
- [ ] Просмотр информации о школе
- [ ] Отображение ключа регистрации школы
- [ ] Копирование ключа школы
- [ ] Статистика учителей и учеников
- [ ] Список учителей школы
- [ ] Назначение ключей ученика учителям
- [ ] Генерация дополнительных ключей

### 2.5 Управление учителями (/dashboard/teachers)
- [ ] Просмотр всех учителей системы
- [ ] Фильтрация по школам
- [ ] Поиск по имени, email, школе
- [ ] **Генерация ключей учителя**:
  - Выбор школы для привязки ключа
  - Указание количества ключей
  - Установка срока действия (дни)
- [ ] Статистика учителей по школам

### 2.6 Управление учениками (/dashboard/students)
- [ ] Просмотр всех учеников системы
- [ ] Фильтрация по школам
- [ ] Поиск по имени, email, школе
- [ ] Статистика учеников по школам

### 2.7 Управление авторами (/dashboard/authors)
- [ ] Просмотр всех авторов
- [ ] Поиск по имени, email
- [ ] **Генерация ключей автора**:
  - Указание количества ключей
  - Установка срока действия (0 = без ограничений)
- [ ] **Просмотр существующих ключей**:
  - Статус ключа (Активный, Использованный, Истекший)
  - Дата создания и истечения
  - Копирование ключа
  - Удаление неиспользованных ключей

### 2.8 Управление модераторами (/dashboard/moderators)
- [ ] Просмотр всех модераторов
- [ ] Поиск по имени, email
- [ ] **Генерация ключей модератора**:
  - Указание количества ключей
  - Установка срока действия (0 = без ограничений)
- [ ] **Просмотр существующих ключей**:
  - Статус ключа (Активный, Использованный, Истекший)
  - Дата создания и истечения
  - Копирование ключа
  - Удаление неиспользованных ключей

### 2.9 Управление ключами (/dashboard/keys)
- [ ] Просмотр всех ключей регистрации в системе
- [ ] Фильтрация по ролям (school, teacher, student, author, moderator)
- [ ] Фильтрация по статусу (active, used, expired)
- [ ] Поиск по коду ключа
- [ ] Статистика по типам и статусам ключей
- [ ] Копирование ключей
- [ ] Удаление неиспользованных ключей

### 2.10 Управление книгами (/dashboard/books)
- [ ] Просмотр всех книг в системе
- [ ] Фильтрация по статусам (Draft, Moderation, Approved, Active)
- [ ] Фильтрация по классам (1-12), предметам, категориям
- [ ] Поиск по названию, описанию, автору
- [ ] **Действия с книгами**:
  - Активация книг со статусом "Approved"
  - Редактирование книг
  - Удаление книг
  - Просмотр деталей книги
- [ ] Статистика по статусам книг

---

## 3. АДМИНИСТРАТОР ШКОЛЫ (role: school)

### 3.1 Дашборд администратора школы (/dashboard)
- [ ] Статистика по учителям и ученикам школы
- [ ] Статистика по книгам в библиотеке школы
- [ ] Быстрые действия для управления школой
- [ ] 4 основные кнопки быстрых действий

### 3.2 Управление учителями (/dashboard/teachers)
- [ ] Просмотр учителей только своей школы
- [ ] Поиск по имени, email
- [ ] **Генерация ключей учителя** для своей школы
- [ ] Статистика учителей школы

### 3.3 Управление учениками (/dashboard/students)
- [ ] Просмотр учеников только своей школы
- [ ] Поиск по имени, email
- [ ] Статистика учеников школы

### 3.4 Управление книгами школы (/dashboard/books)
- [ ] **Переключение режимов просмотра**:
  - "Все книги" - для добавления в библиотеку
  - "Моя библиотека" - для управления книгами школы
- [ ] **В режиме "Все книги"**:
  - Просмотр всех активных книг
  - Кнопка "Добавить в библиотеку"
- [ ] **В режиме "Моя библиотека"**:
  - Просмотр книг, добавленных в школу
  - Кнопка "Удалить из библиотеки"
- [ ] Фильтрация по классам, предметам, категориям
- [ ] Поиск по названию, автору

### 3.5 Управление ключами (/dashboard/keys)
- [ ] **Генерация ключей ученика** для своей школы
- [ ] Просмотр ключей, созданных для школы
- [ ] Копирование ключей ученика

---

## 4. УЧИТЕЛЬ (role: teacher)

### 4.1 Дашборд учителя (/dashboard)
- [ ] Статистика учеников учителя
- [ ] Доступ к книгам школы
- [ ] Современный дизайн с карточками

### 4.2 Управление учениками (/dashboard/students)
- [ ] Просмотр только своих учеников
- [ ] Поиск по имени, email
- [ ] Статистика по своим ученикам

### 4.3 Книги школы (/dashboard/books)
- [ ] Просмотр только активных книг своей школы
- [ ] Кнопка "Открыть книгу" для просмотра контента
- [ ] Фильтрация по классам, предметам
- [ ] Поиск по названию

### 4.4 Управление ключами (/dashboard/keys)
- [ ] **Генерация ключей ученика** (если имеет права)
- [ ] Просмотр выданных ключей

---

## 5. УЧЕНИК (role: student)

### 5.1 Дашборд ученика (/dashboard)
- [ ] Доступ к книгам школы
- [ ] Упрощенный интерфейс

### 5.2 Книги школы (/dashboard/books)
- [ ] Просмотр только активных книг своей школы
- [ ] Кнопка "Открыть книгу" для доступа к контенту
- [ ] Фильтрация по классам, предметам
- [ ] Поиск по названию

---

## 6. АВТОР (role: author)

### 6.1 Дашборд автора (/dashboard)
- [ ] Статистика по собственным книгам (всего, черновики, на модерации, опубликованные)
- [ ] Инструменты для создания книг
- [ ] Быстрые действия для авторов

### 6.2 Управление книгами (/dashboard/books)
- [ ] Просмотр только своих книг
- [ ] **Создание новых книг** (кнопка "Создать книгу")
- [ ] **Действия с книгами**:
  - Редактирование черновиков
  - Отправка на модерацию (Draft → Moderation)
  - Удаление собственных книг
- [ ] Фильтрация по статусам (Draft, Moderation)
- [ ] Поиск по названию, описанию

---

## 7. МОДЕРАТОР (role: moderator)

### 7.1 Дашборд модератора (/dashboard)
- [ ] Статистика по модерации (ожидающие, одобренные, еженедельные проверки)
- [ ] Инструменты для одобрения книг
- [ ] Быстрые действия модератора

### 7.2 Модерация книг (/dashboard/books)
- [ ] Просмотр только назначенных для модерации книг
- [ ] **Действия модератора**:
  - Одобрение книг (Moderation → Approved)
  - Просмотр деталей книги
- [ ] Фильтрация по статусам (Moderation, Approved)
- [ ] Поиск по названию, автору

---

## 8. ОБЩИЕ ФУНКЦИИ ДЛЯ ВСЕХ РОЛЕЙ

### 8.1 Навигация
- [ ] **Роль-специфичная боковая панель**:
  - Суперадмин: Пользователи, Школы, Авторы, Модераторы, Учителя, Ученики, Книги, Управление ключами, Настройки
  - Админ школы: Дашборд, Учителя, Ученики, Книги, Управление ключами, Настройки
  - Учитель: Дашборд, Ученики, Книги, Управление ключами, Настройки
  - Ученик: Дашборд, Книги, Настройки
  - Автор: Дашборд, Книги, Настройки
  - Модератор: Дашборд, Книги, Настройки

### 8.2 Настройки (/dashboard/settings)
- [ ] **Управление профилем**:
  - Редактирование отображаемого имени
  - Редактирование имени и фамилии
  - Просмотр email (только чтение)
  - Просмотр роли (только чтение)
- [ ] **Безопасность аккаунта**:
  - Инструкции по смене пароля
  - Ссылка на сброс пароля
- [ ] Сохранение изменений с уведомлениями

### 8.3 Неавторизованный доступ (/unauthorized)
- [ ] Отображение страницы для пользователей без доступа
- [ ] Кнопка возврата к входу

---

## 9. БАЗА ДАННЫХ И ИНТЕГРАЦИИ

### 9.1 Структура базы данных
- [ ] **Таблица schools** со всеми полями (name, city, address, bin, registration_key, max_teachers, max_students, created_by)
- [ ] **Таблица books** с полным набором метаданных (base_url, title, description, grade_level, course, category, status, author_id, moderator_id, price, cover_image, file_size, pages_count, language, isbn, publisher, publication_date)
- [ ] **Таблица school_books** для ассоциации школ и книг
- [ ] **Таблица registration_keys** с правильной структурой
- [ ] **Row Level Security (RLS)** политики для всех таблиц

### 9.2 Аутентификация Supabase
- [ ] Вход в систему
- [ ] Регистрация с подтверждением email
- [ ] Управление сессиями
- [ ] Отсутствие ошибок rate limiting

---

## 10. ПРОВЕРКА ОШИБОК И ГРАНИЧНЫЕ СЛУЧАИ

### 10.1 Обработка ошибок
- [ ] Корректные сообщения об ошибках на русском языке
- [ ] Обработка сетевых ошибок
- [ ] Валидация форм с подсказками
- [ ] Защита от SQL-инъекций и XSS

### 10.2 Производительность
- [ ] Время загрузки страниц < 3 секунд
- [ ] Отзывчивость интерфейса
- [ ] Корректная работа фильтров и поиска
- [ ] Пагинация для больших списков

### 10.3 Мобильная версия
- [ ] Адаптивный дизайн на мобильных устройствах
- [ ] Корректная работа навигации
- [ ] Читаемость текста и удобство использования

---

## 11. WORKFLOW ТЕСТИРОВАНИЕ

### 11.1 Полный цикл создания школы
1. [ ] Суперадмин создает школу с ключом
2. [ ] Регистрация администратора школы по ключу
3. [ ] Генерация ключей учителей администратором школы
4. [ ] Регистрация учителей по ключам
5. [ ] Генерация ключей учеников учителями
6. [ ] Регистрация учеников по ключам

### 11.2 Полный цикл книги
1. [ ] Суперадмин создает ключ автора
2. [ ] Регистрация автора по ключу
3. [ ] Автор создает книгу (статус: Draft)
4. [ ] Автор отправляет книгу на модерацию (статус: Moderation)
5. [ ] Суперадмин назначает модератора
6. [ ] Модератор одобряет книгу (статус: Approved)
7. [ ] Суперадмин активирует книгу (статус: Active)
8. [ ] Администратор школы добавляет книгу в библиотеку
9. [ ] Учителя и ученики получают доступ к книге

### 11.3 Управление ключами
1. [ ] Генерация ключей с разными сроками действия
2. [ ] Использование ключей при регистрации
3. [ ] Проверка истечения ключей
4. [ ] Удаление неиспользованных ключей

---

## 12. ФИНАЛЬНАЯ ПРОВЕРКА

- [ ] Все функции работают без ошибок JavaScript в консоли
- [ ] Сборка проекта (npm run build) проходит успешно
- [ ] Линтинг (npm run lint) показывает только предупреждения
- [ ] Все роли имеют соответствующий доступ
- [ ] База данных содержит правильную структуру
- [ ] Аутентификация работает стабильно без rate limiting ошибок

---

**Примечание**: Этот документ покрывает все реализованные функции образовательной платформы. Каждый пункт должен быть протестирован в продакшн среде для обеспечения корректной работы системы. 